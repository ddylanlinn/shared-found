# æ¶æ§‹é‡æ§‹è¨­è¨ˆæ¦‚è¦½

> è¨­è¨ˆæ—¥æœŸï¼š2026-02-05
> ç‹€æ…‹ï¼šPhase 1 è¦åŠƒä¸­

## ğŸ“‹ è¨­è¨ˆèƒŒæ™¯

### ç‚ºä»€éº¼è¦é‡æ§‹ï¼Ÿ

**åŸæ¶æ§‹å•é¡Œ**ï¼š
- âŒ Google Apps Script æ˜¯å°é–‰ç’°å¢ƒï¼ŒAI ç„¡æ³•ç›´æ¥ä¿®æ”¹
- âŒ æ“´å……æ€§å—é™ï¼Œé›£ä»¥æ•´åˆå¤–éƒ¨æœå‹™
- âŒ ç¼ºä¹ç¾ä»£é–‹ç™¼å·¥å…·æ”¯æ´ï¼ˆTypeScriptã€æ¸¬è©¦ã€ç‰ˆæœ¬æ§åˆ¶ï¼‰

**æ–°æ¶æ§‹ç›®æ¨™**ï¼š
- âœ… AI å‹å–„ï¼šç¨‹å¼ç¢¼åœ¨ GitHubï¼ŒAI å¯ç›´æ¥ä¿®æ”¹
- âœ… å‰å¾Œç«¯çµ±ä¸€ï¼šNext.js åŒæ™‚è™•ç† UI å’Œ API
- âœ… é›¶æˆæœ¬éƒ¨ç½²ï¼šVercel å…è²»æ–¹æ¡ˆ + Google Sheets
- âœ… é ç•™æ“´å……ï¼šPhase 2 æ•´åˆ OpenClaw AI è‡ªç„¶èªè¨€è§£æ

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

### æ•´é«”æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä½¿ç”¨è€…     â”‚         â”‚     Next.js (Vercel Serverless)  â”‚
â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ LINE Bot    â”‚ Webhook â”‚   â”‚     API Routes           â”‚   â”‚
â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   â”‚                          â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   â”‚  POST /api/webhook       â”‚   â”‚
                        â”‚   â”‚  GET  /api/expenses      â”‚   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚   â”‚  POST /api/expenses      â”‚   â”‚
â”‚   ä½¿ç”¨è€…     â”‚         â”‚   â”‚  PUT  /api/expenses/:id  â”‚   â”‚
â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚  DELETE /api/expenses/:idâ”‚   â”‚
â”‚ Web Browser â”‚  HTTPS  â”‚   â”‚  POST /api/auth          â”‚   â”‚
â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚               â”‚                  â”‚
                        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                        â”‚   â”‚   Dashboard (React UI)   â”‚   â”‚
                        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                        â”‚               â”‚                  â”‚
                        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                        â”‚   â”‚      Service Layer       â”‚   â”‚
                        â”‚   â”‚  - GoogleSheetsService   â”‚   â”‚
                        â”‚   â”‚  - LineService           â”‚   â”‚
                        â”‚   â”‚  - OpenClawService*      â”‚   â”‚
                        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚    Google Sheets (Database)    â”‚
                         â”‚  - Data Tab (äº¤æ˜“è¨˜éŒ„)          â”‚
                         â”‚  - Config Tab (åˆ†é¡ã€æ¨™ç±¤ã€é ç®—) â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

* OpenClaw æ•´åˆåœ¨ Phase 2
```

---

## ğŸ”„ æ ¸å¿ƒæµç¨‹

### 1. LINE Bot è¨˜å¸³ï¼ˆRich Menuï¼‰

```
ä½¿ç”¨è€…é»æ“Š Rich Menu ã€Œåˆé¤ã€æŒ‰éˆ•
    â†“
LINE ç™¼é€ Postback Event
    data: "action=add&category=é£Ÿç‰©&subcategory=åˆé¤&amount=100"
    â†“
Next.js /api/webhook é©—è­‰ LINE signature
    â†“
è§£æ postback data â†’ å»ºç«‹ Expense ç‰©ä»¶
    â†“
GoogleSheetsService.addExpense()
    â†“
å›è¦†ï¼šã€Œâœ… å·²è¨˜å¸³ï¼šåˆé¤ $100ã€
```

### 2. è‡ªç„¶èªè¨€è¨˜å¸³ï¼ˆPhase 2ï¼‰

```
ä½¿ç”¨è€…è¼¸å…¥ï¼šã€Œåˆé¤ 200ã€
    â†“
LINE ç™¼é€ Message Event
    â†“
Next.js â†’ OpenClaw API è§£æ
    â†“
å›å‚³ï¼š{ amount: 200, category: "é£Ÿç‰©", subcategory: "åˆé¤" }
    â†“
GoogleSheetsService.addExpense()
    â†“
å›è¦†ï¼šã€Œâœ… å·²è¨˜å¸³ï¼šåˆé¤ $200ã€
```

### 3. Dashboard æŸ¥è©¢èˆ‡ç·¨è¼¯

```
ä½¿ç”¨è€…é–‹å•Ÿ Dashboard
    â†“
è¼¸å…¥ PIN ç¢¼ â†’ POST /api/auth â†’ JWT token
    â†“
GET /api/expenses?month=2 (å¸¶ token)
    â†“
é¡¯ç¤ºè¨˜å¸³åˆ—è¡¨ã€çµ±è¨ˆæ‘˜è¦
    â†“
ç·¨è¼¯ â†’ PUT /api/expenses/5
    â†“
æ›´æ–° Google Sheets
```

---

## ğŸ› ï¸ æŠ€è¡“æ£§

### å‰ç«¯
- **Next.js** 15.x (App Router)
- **React** 19.x
- **TypeScript** 5.x
- **Tailwind CSS** 3.x

### å¾Œç«¯
- **Next.js API Routes**
- **Google Sheets API** (è³‡æ–™åº«)
- **LINE Messaging API** (LINE Bot)
- **jsonwebtoken** (JWT é©—è­‰)

### éƒ¨ç½²
- **Vercel** (å…è²»)
- **Google Sheets** (å…è²»)
- **LINE Messaging API** (å…è²»)

---

## ğŸ“‚ å°ˆæ¡ˆçµæ§‹

```
next-app/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ auth/route.ts              # PIN é©—è­‰
â”‚   â”‚   â”œâ”€â”€ expenses/route.ts          # CRUD API
â”‚   â”‚   â”‚   â””â”€â”€ [id]/route.ts
â”‚   â”‚   â””â”€â”€ webhook/route.ts           # LINE Webhook
â”‚   â”œâ”€â”€ dashboard/page.tsx             # Dashboard UI
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ globals.css
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ PinLogin.tsx
â”‚   â”œâ”€â”€ ExpenseList.tsx
â”‚   â”œâ”€â”€ ExpenseForm.tsx
â”‚   â””â”€â”€ Summary.tsx
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ google-sheets.ts               # Google Sheets Service
â”‚   â”œâ”€â”€ line.ts                        # LINE Service
â”‚   â”œâ”€â”€ openclaw.ts                    # OpenClaw Service (Phase 2)
â”‚   â””â”€â”€ jwt.ts
â”œâ”€â”€ types/
â”‚   â””â”€â”€ expense.ts
â”œâ”€â”€ .env.local
â””â”€â”€ package.json
```

---

## ğŸ—“ï¸ é–‹ç™¼éšæ®µ

### Phase 1ï¼šæ ¸å¿ƒæ¶æ§‹ï¼ˆç•¶å‰ï¼‰

**ç›®æ¨™**ï¼šå®ŒæˆåŸºæœ¬åŠŸèƒ½ï¼Œå–ä»£ Google Apps Script

- âœ… Next.js å°ˆæ¡ˆå»ºç«‹
- âœ… Google Sheets æ•´åˆï¼ˆService Accountï¼‰
- âœ… LINE Bot Webhookï¼ˆRich Menu Postbackï¼‰
- âœ… Dashboard UIï¼ˆPIN ç™»å…¥ã€CRUDï¼‰
- âœ… éƒ¨ç½²åˆ° Vercel

### Phase 2ï¼šé€²éšåŠŸèƒ½ï¼ˆæœªä¾†ï¼‰

**ç›®æ¨™**ï¼šOpenClaw AI æ•´åˆã€åœ–è¡¨è¦–è¦ºåŒ–

- ğŸ”® OpenClaw HTTP API é–‹ç™¼
- ğŸ”® è‡ªç„¶èªè¨€è¨˜å¸³æ•´åˆ
- ğŸ”® Recharts åœ–è¡¨è¦–è¦ºåŒ–
- ğŸ”® åŒ¯å‡º CSV åŠŸèƒ½
- ğŸ”® é€²éšç¯©é¸èˆ‡æœå°‹

---

## ğŸ“š ç›¸é—œæ–‡ä»¶

- [API è¦æ ¼æ–‡ä»¶](./api-specification.md)
- [ç¬¬ä¸‰æ–¹å¹³å°è¨­å®šæŒ‡å—](./third-party-setup-guide.md)
- [é–‹ç™¼å¯¦ä½œæŒ‡å—](./development-guide.md)
- [éƒ¨ç½²æŒ‡å—](./deployment-guide.md)
- [æ¸¬è©¦æŒ‡å—](./testing-guide.md)

---

## ğŸ¯ è¨­è¨ˆæ±ºç­–

### ç‚ºä»€éº¼é¸æ“‡ Next.jsï¼Ÿ
- âœ… å‰å¾Œç«¯çµ±ä¸€ï¼Œéƒ¨ç½²ç°¡å–®
- âœ… Vercel serverless é›¶æˆæœ¬
- âœ… TypeScript åŸç”Ÿæ”¯æ´
- âœ… AI å‹å–„ï¼Œå¯ç›´æ¥ä¿®æ”¹

### ç‚ºä»€éº¼é¸æ“‡ Google Sheetsï¼Ÿ
- âœ… é›¶æˆæœ¬ã€ç„¡éœ€ç¶­è­·
- âœ… è¦–è¦ºåŒ–ç·¨è¼¯å‹å–„
- âœ… å¯ç›´æ¥åœ¨ Sheets æŸ¥çœ‹/ä¿®æ”¹è³‡æ–™

### ç‚ºä»€éº¼ç”¨ Service Accountï¼Ÿ
- âœ… é©åˆ serverless ç’°å¢ƒ
- âœ… ç„¡éœ€ OAuth ç™»å…¥æµç¨‹
- âœ… é©åˆå–®ä¸€å®¶åº­ä½¿ç”¨

### Rich Menu ç‚ºä»€éº¼ç”¨ Postbackï¼Ÿ
- âœ… LINE å®˜æ–¹æ¨è–¦æ–¹å¼
- âœ… ä¸æœƒé¡¯ç¤ºåœ¨èŠå¤©å®¤
- âœ… æ˜“æ–¼å€åˆ†è‡ªç„¶èªè¨€è¨Šæ¯

---

## ğŸ”’ å®‰å…¨æ€§è€ƒé‡

- âœ… LINE Webhook signature é©—è­‰
- âœ… Dashboard JWT token é©—è­‰
- âœ… ç’°å¢ƒè®Šæ•¸åŠ å¯†å„²å­˜ï¼ˆVercelï¼‰
- âœ… Service Account æœ€å°æ¬Šé™åŸå‰‡

---

## ä¸‹ä¸€æ­¥

1. ğŸ“– é–±è®€ [ç¬¬ä¸‰æ–¹å¹³å°è¨­å®šæŒ‡å—](./third-party-setup-guide.md)
2. ğŸ’» é–±è®€ [é–‹ç™¼å¯¦ä½œæŒ‡å—](./development-guide.md)
3. ğŸš€ é–‹å§‹å¯¦ä½œ Phase 1
